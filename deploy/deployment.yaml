---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: burrow
  name: burrow
spec:
  minReadySeconds: &mrs 10
  selector:
    matchLabels:
      app.kubernetes.io/name: burrow
  template:
    metadata:
      labels:
        app.kubernetes.io/name: burrow
    spec:
      containers:
        - command:
            - sh
            - -c
            - exec sh <(echo IyEvdXNyL2Jpbi9lbnYgc2gKCkVYRUNfQklOPSR7RVhFQ19CSU46LS9jYWNoZWQvYnVycm93fQoKY2QgIiQoZGlybmFtZSAiJEVYRUNfQklOIikiIHx8IHRhaWwgLUYgL2V0Yy9ob3N0cwoKaWYgISAkRVhFQ19CSU4gLWggMj4mMSB8IGdyZXAgY29uZmlnLWRpciA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICBybSAtZiAiJEVYRUNfQklOIgogIGNwIC1hICIkKHdoaWNoIGJ1cnJvdykiICIkRVhFQ19CSU4iCiAgbHMgLWwKZmkKCmVjaG8gSDRzSUFOMWhFMllBQSsxYSszT2lXQmFlbi8wcm1IUm1xak85Sm9BYVkyWXlXMHA4Z1BnSStHUnJOOFZMdVBLeUJWVFNrLzk5endWVWpDWTlPMVc5TTFNVnV0SWk5M0x1ZVh6bm5JK0xxdWZPa0JFdWtXdGMrdVozMytRZ1NiSmNLaEh4NTNYeVNkTEY1Qk9mRmNva1FSV3Z5ZUwxTlZtbXl3UVpmL21PSUwrTk9vZEg2QWZ5RWxUeGRkZjNsdDZyODJEYWJQYUduTVFZWXZmNU56aytmSDhWK3NzckJibFh1cnNpZkRPWHUyZTd6VUdWYno5VysremQrWmZzMTl2OG1Sa0VDLy8yNnNxVEYraFNBOWdFc20xZHFwNXp0ZlFVTDdnQ1Ayci9sRlZWOS8zSHdMTjA5KzdzZVM5eTBPbnpkMmRxRExvclRaL0pvUjNrdDFMeUM4OFBMZ05uWVovbHhuV20xMGsxMkoxbmx2OGM0ZlhYT3RvZzkvTHo1MWdCMVVCNWJNaGFWMHpQc3hKVkxEM0NHaVF5VGk2LzF1SG03Tm81K083SXJrYmtWNFNseWdIeDQ0L0VseHhCekx3bFlhMEk1QkxuREQ4VUIzVkIvSm5RUEJnaENOVUdJT2xMME5aYS9YRDMwM044MGRlWEszM3B4eGMvL0hTWFhJd2w1aFhpN0R3ZFBpUHlQUEhyMmZsSFRRNTA0dE1Qall0TFJ3OWsrQ1pmV3ZMTWtoL1BVK21Yd1NZNEF5R2E1K3E1NTF4T1YwMlBZS1A2U3B0MEk1N21GZ3FxMklvN05WVGFhRE1PUjZrdXQ5S29paWsxaGFndkN1WE93QXM2QTdiQXo2dGhoeWx1ZW5OajNibXZWUmpIZHRobWwxS2R0Y0ZQdWgyV1lhMnBPNHBVcDFLWTBBMUxhckVyYmQ1WlRjZENJSStMSzZWWmNaWG1pSmJHYThTMjFvYnMxdUUrMXVDZGphMDVJNSs5WnoveHRHQnJxQkpxNDQzZmkycWszQnlGREtvYWU3bUJLVG1CMlJkUHJ5WFREVWVtNndqZkl6bVZDUFR6d1U1U2duVkFCNE5qekxrMjRYeVdvWjRHVEJWeHpaMjl5K2xZV2s1RjFwZ3h0YytxV0ExVVZBMm45SVpTQzRLdHVsMWxJbHBsdGltc3NHeVdxZGxUMmp3NFp4bHVxQlJxaXltNVdhaUZoK3NlRXVaS2EvU2tOVWNSYTNnd0Qrd29qQ0tGQWRuazJtQ1JnRUNYU0Nsb3MxVHZGYmZYZDZVMUsydDUzRG4wbFN1czFLWTlWNmxBdzlkVnVoSnAxVVMyTk81NnlqcHpIbFhSQTEwSjFjSW9rQ1pjUndhNXZibG43V3hDYkJ2UGZUMkdpYS81YUc4SFQzZFhpdHVsbERIWWhHbzNiSE94QVY5R0xGT2FLM1RwU1J0VHFhOWdyTlZkcWU0RHJGR3pZTXhtSU1ZcVBXeG4vUFVBZUREaEd1aGJpbU0wRld2MGRMeFpTRXd0OVkxcXlDMkJWRnRka0N2Rk9rdU9CVGdkemVYbVRYdm56K2dnbGpGMmVacXl0UmEzbUJZU0gwb0Z6bGFabXI2MUwzTnRCdjR3TmJCeGY2MGFhS2pxenNUcWhtUFVOdkVib2NpK2ZsMGs4aHJ4cTZFSFVLWVdTUFh6VUJiODBJR0V2TVJWTUMwaWo3Z2tmTHlJODkreE5MUWs4Z3NDNXlwYXVyS2p3K2xCYlR1N3dQbjVMeUx2SDQwUS95WisrNDNBeWYvTEwvVmVBMmY4NFlUYytjYzRvZldJQzFSYUkvVkp6V2JuQUFLSE1sVW5zQUJjSVl2V1NCazNJcGtXVmhwZFJEMVVLN091c05DYUd6d1hpUW40akVHejRUN1FKZ1Fud0k2R0pPRWdLQ1laeXpNV1pUMGlEYTdSSmFjVGdWS3BrUWdKZE4wWHF5Z0pVT2VhandDd3RCcEs5RTBvUWFMenRBWnJtTlFVWVhDUVVBRHNVS1pIRmk0R0Qya1FNS0JVWjdoU1d4d0dQTXhiejRkcE1CTHdDcWJpUHFEWmhHenJCVDlnR2FHcEZMZ0FkQmpnNENxT2F2VG1wTUhPV1NoSzA2QnpYNGMvMXVnTWh0ZWQrd2Y0RzhiM3NsR05qeE44NEJrZ0ozellKVFpWWVVBcmNBb1o2bnJaN0RNemEycURyYVVXNkVlcExhb1NyOXZDdGhnR2J3TTRDaU5mWTBvRHJka2dJVmtyczRmRU4vSjRha2dUU0ZSVVhjOG1WRThwWUYxSG9kUUt5Z0J3YTJkREV4Zk9FU1JPMGVoTXFFcnBNejB2S2Fpb0Z3SmJjWVJUOHFMWnBPQ0VwYkp0c2FXeVRtT1pvTGNibEhteHRwQlF6WWFDRmJMM29Jcyt2akhDY1RFOFdqTzlCM21mdC83dHdUbmJBRXcwRzM2N1VUUFZHQk0ySkhnSDJ4d09IVWo2OFliazdXVE9zTm1JWUp5VXh6Z3VWSVd2YjB6cGljSytFcVVKRklYV1F6aHFWa2hJNE01MHJGVm1vcTE4YTk5aFBXSCtHejdoS3JNSlhIUHgzRmY5K3hUTGlFcngzRk4rbTRnbWpBdGJ2VWREYXdQMnVXdTMxR1JCN2xwMTdGQnJUcUdvRDhPT00wVlFFSGMrQVJ3SEt1UWFGTkRqdFk5ODBqRTZZZzNtZVovYkZtWHEyTWNrTk1WbVk2RkFqcldSMTM3RnA5M3B4UFJqdjhkcmxKSm1CSEVhRjhCK084M2JxSlRtRGN3YmtWNGI3Rlh4ZDFkd29QamIvSnh6V0doOEwzUld0U3crNXJHdkhxWVRqcFFud2dLS2UyVTJnN3dwbWhCM05ZN0pRd0huOXlqVXNQNkYyUGNRazJvNGdIb0V6UWh3MnE2SCtxZmlIT3RtVlFxS013S01rNnRkakVBdjdDUGU2dnJ5R011eDYybU03cUdPQUdFUk9LRjFITk9UbUk4eFViVlNiRFp3azFEZFRsdzNvQUdGMlZpOXhQZ2VUeS92eDlqMTVtelV3ZlhrZUV5c3JUUCtlV0ticHFrNVF3UFh1U2tRSG1YUzhRYmpSaEhYM0Q3RzUzRWNiNkJtRnhVWUIzc1d6THdJZU9pdU5HaVVCem8rQVU3UzJxdzZEYWk5UTROcitqN1htc2IyWmVSbTQvVTBhMlhpNlNSeUQrMnRoUkw0VEV2eVVWWHNEWW50bEdFTzFwZHJTYS9tQ3E0eG81aThkSjhlWEh1TDZ3eDJPUlB3WjBNdFgvS01RTFAzWHVYMUdHeklCTWRkcEU5U0RHTTlUK256QWdOdHRNamFYSmNtZ2ltUE4zSGRTKzJNcHVPU0MzWm1hbDIyRG5iZmMra290bXdiWDhzU29vc2NVSk5YcWM3K0llcUE1MlF1bnlBNW1kRS96SEFjVEZVRkc3T0hIcXFpYlJYWWRyL1JpT3NreU9NOHJTV3NJWk5XZktHMmxLS1NxMFFsUzVwTVZ4SU5LR3lORUk5bGlSWHdYbWtwalFYOHlNU2s5SFExQlFvdWlSWG9BQlZTd2ZTWTZXNjd4SDFNaVp1TlVHTzRuVmU1dWdTTWh6STFZRks0YTBoUndxSTY4K3E2aThoMVI0US9WTjEwQjk2NmV3OS9JcGRVbW5wQ3g3RnRjZVJTU282alVWcks3RFV2bGtybHNIN0RmUklRcmlpV0J2cU4xa21rU1VQRHRqQlpwR2V5NmFoclFnY2FsbFlhNkFxVndYcWpjMjVnL1J0NDFBSWJhOERlTml0MVRxa3N0c3VwcU95ODdDemx2aDN5eGcxUFN4Q1BoMDl2czV3VHNsd040bHpDV1JiTFMxaFE4ZmZJZXpxdEc4UUlIbE1BRzFpZXZXTDVOL1hMVkpOc0pUT1Npci8yRHF2eFNUWjBXSGtucEgraTZrT0ZBYWFiWm5oN0ZQeUpNU3NsVEdpd1hzVno3dDlpbklETndjWUJ1MGg0ak1TUCtGRi90RVlhM1lnVUxJOWFvNzZic0s4K1U0bm40ZSt2TWpwY3padHhIQXpJSzE4cHNKVUp3NEdPVklBZkVTY00reWxoZk9SWDRrVnBiV0NPQjA4cm9IOGJWOVlwTUxsQ0xaTHhJeWZVQlU0c1JoSmlzNTBTOHBaYUF6T0FwNTlqbTQ5aUVWVTNiTnIxdGgxZGdIdW5ZOXZQZHVlaldHSjIxMHppSGE5aEo0LzJvTHNTcysrMFR1RjE0anBSd0N6VVdMekNOZzkxaHU2WXhXV0N0V3hub3lwUUp3Wm96K0R2Y1QzRFBoN0VqQU16YW9nTFUrcHI4T2lPbjVLS25sZ3FsMUVmNjdiclBHSmxoNDF0VjRJbnF3V1dJdzZUem5QVWRRNng5SHJIWVlRMEorSW54VWlONjJUTmw4YkYxMWxORmxNdjc4ZCtoaXJMUnRXdjFBU00vK043MmRiQkU1SWhOeHUwQkN3UHhoSDRQVkFqRXpPM1hkYytqdk1tMkRGMDBkcmg5NTNadlRPN3Z6YXplejdZMThJNzNidlhQK2ttVjRhN0tlRnk2YTB2STlteGN4L2tNUENXdXUzSldrNjFrZTRHK2NYU215RmJ2d1ZXaDJhWUM3ckFCYmNiNDQ4aitJL3RkWUVSL2t3RXB1N0dlOThuZHRDM0UzYzc2YS9zcFJNRTNpdEhubnU0bTA0UU1hTThJNGp0SnZsdHVoOGY2NGkwV3lJeEkyL0xobXJxcXFVdmsyMTR2TE9lVDJYZUV1ZnAyVms4R0crd2c3cm9JcmVUZXNyS3IxcjNkYXQyN3dnK3BoY0lnbTJJZC8vWWZjTlNrMG14NU5SNExIaG5Pajd5UlBvKzRlem5yZnI0dVBpS2wyVGZ6Mk4yZjVzNDVQemo3d3NSUWNUT09Oc2FjMGJjd1pkVTlxRlhzdXRuUTdPRnowNmxzOHgwWmFuTDF0NEZLRDNGaGlVV3hYdTIrYVUrVytxK0NUSytESHA5bG5rVTZnMmhMclp1ODlkazRtQnZOdlAxSUR1eDEyaUk5Y0YrSmtVZXZLeUJRS2RuOFZWajZZVUxIKzZYRi9veUs2WXA5SVo5RWNSVSszVmhMNjFBa3MvSEdFcDNsbCtBcU5jVmg1MDNVYlNkOFJxTU1qaEtyejgrV1M4VFpCdXAvWXdrWXQvZkhWNTlQbzdiay9XNGtBUHpManZ0UTBiMExqRC9NNG96eW1CdHZoR2NRZnpmQWRGWlZLUXVQMTR4czk0VEZIQmR4NERFVTJHOTdVMjdzRnhrWDBydUZYb0Q2UGcxZUFCRk10RDlBT05iSEZTRndTTmZIZFRGd1cwK1dJYjZJYTUxMjlmZnE5Ny91ZXA5eTRCaTBPZ3IyUTVsYVBUWVVlbjc4Y1Juc20xN2ExM0RYUlFMcS9KOGIxeS9CM0hOMjN6cCtjaXRxcXlhd0NuaTZ3NXlrUk02ZWRVRHlxRUgyUFl2SGJiTGRvYWRSNmJYNmZQMVFmMDJUMTRXbm5QeDIvM1lobU1GTkExS3IzOUwzTjZRSkpsenZRRE4wTXVTdW4raDFtdlh1Mks2SFpVT3BodFIyNUhUSmZlRmhOOVJlT01mT2ZndmkrNWJ1RTZYU200OGdCZEJwUFRzWmI3c0ZucTVUdWFleDNCcDMyVjhVTzJ6eVJwblI0Z0UzMjUvdWJIN2JjRjVLdVk0UjNCVTNvQmYzQ0x6bXU1R05zSlErMDlLdUM1L09rOWF0WWw3cG1kck1RcnIzZnZIUVFzM3l4NS9mNXVuRTBNQ0hiQUJVTTJydHVkamhCeThHajJjNGkxMDkrUU1zSDkzZjhZbnU3SDB4cGREK0djaXUvc1NCUm0rSjliVEpOblA4VngxUDZYWFplb0hhWlJKSlh4YzVBNHVaT0tleGVIZkVGKzdYK084RHE3NEZ6Vi9WV1R0OTZOUHd1ckY4RjhYVTMra0FSL0RLdkhvSFhKaGppdmI3K2g2UjllT0RmaEFCR1JEUDJyRldSOGoxOUVkYnhsdE8zMWVBMS9LNmJMUTVSL3ZXU0FlOGNyVWMyNUhYTEdnUFcxSjRMYUgya3Z5SjdVZndZQitqKzBPUkpCRGx5OUorRWZkMHRRTjlaSVRubUNFMjYyUHpHWkg3cy8rM2VYNzhYNjhIKy9IbjMzOEYxb2thRElBTUFBQSB8IGJhc2U2NCAtZCB8IHRhciAteHoKc2ggY29uZmlndXJpbmcuc2gKY2htb2QgYSt4IC4vKi5zaAoKaWYgWyAtbiAiJEFVVE9fUkVMT0FEIiBdOyB0aGVuCiAgZWNobyBJeUV2ZFhOeUwySnBiaTlsYm5ZZ2MyZ0tDbUoxY25KdmQxOWhaR1J5UFNSN01Ub3RNVEkzTGpBdU1DNHhPamd3TURCOUNncDFiblJwYkNCYklDSWtLR04xY213Z0xYTWdJaVJpZFhKeWIzZGZZV1JrY2k5aWRYSnliM2N2WVdSdGFXNHZjbVZoWkhraUtTSWdQU0JTUlVGRVdTQmRPeUJrYnlCemJHVmxjQ0ExT3lCa2IyNWxDZ3AzYUdsc1pTQjBjblZsT3lCa2J3b2dJSE5zWldWd0lEVnRDaUFnWm05eUlHOWlhaUJwYmlBa0tHTjFjbXdnTFhNZ0lpUmlkWEp5YjNkZllXUmtjaTl0WlhSeWFXTnpJaUI4SUdkeVpYQWdYbUoxY25KdmR5QjhJR2R5WlhBZ1gzTjBZWFIxY3lCOElHZHlaWEFnTFhZZ0ozMGdNU1FuSUh3Z2MyVmtJQzFGSUNkemZsNHVLMk5zZFhOMFpYSTlJaWhiWGlJdVhTc3BJaTRyWTI5dWMzVnRaWEpmWjNKdmRYQTlJaWhiWGlJdVhTc3BJaTRyS0Z4a0tYNWpiSFZ6ZEdWeVBWd3hMR052Ym5OMWJXVnlYMmR5YjNWd1BWd3lMRnd6Zm1jbklId2djMjl5ZENCOElIVnVhWEVwT3lCa2J3b2dJQ0FnWTNWeWJDQXRXQ0JFUlV4RlZFVWdJaVJpZFhKeWIzZGZZV1JrY2k5Mk15OXJZV1pyWVM4a0tHVmphRzhnSWlSdlltb2lJSHdnWVhkcklDMUdMQ0FuZTNCeWFXNTBJQ1F4ZlNjcEwyTnZibk4xYldWeUx5UW9aV05vYnlBaUpHOWlhaUlnZkNCaGQyc2dMVVlzSUNkN2NISnBiblFnSkRKOUp5a2lJQ1ltSUdWamFHOEtJQ0JrYjI1bENtUnZibVVLIHwgYmFzZTY0IC1kID5hdXRvcmVsb2FkLnNoCiAgc2ggYXV0b3JlbG9hZC5zaCA+L2Rldi9udWxsIDI+JjEgJgpmaQoKaWYgWyAteiAiJFpLX0VORFBPSU5UUyIgXTsgdGhlbgogIGVjaG8gJ2hvc3RzOiBmaWxlcyBtZG5zNF9taW5pbWFsIFtOT1RGT1VORD1yZXR1cm5dIGRucyBtZG5zNCcgPj4vZXRjL25zc3dpdGNoLmNvbmYKICBldGNkID5ldGNkLmxvZyAyPiYxICYKICB6ZXRjZCAtLXprYWRkciA6MjE4MSAtLWVuZHBvaW50cyBsb2NhbGhvc3Q6MjM3OSA+emV0Y2QubG9nIDI+JjEgJgpmaQoKaWYgWyAtZCBtYW51YWwgXSAmJiBbIC1zICJtYW51YWwvJHtFWEVDX0JJTiMjKi99LnlhbWwiIF07IHRoZW4KICBleGVjICIkRVhFQ19CSU4iIC0tY29uZmlnLWRpciBtYW51YWwKZWxzZQogIGV4ZWMgIiRFWEVDX0JJTiIKZmkK | base64 -d)
          env:
            - name: TZ
              value: Asia/Shanghai
          image: muicoder/burrow:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
                - zkctl
                - ls
          name: burrow
          ports:
            - containerPort: 8000
              name: http
            - containerPort: 2379
              name: etcd
          readinessProbe:
            httpGet:
              path: /burrow/admin/ready
              port: http
          startupProbe:
            failureThreshold: 30
            httpGet:
              path: /burrow/admin/ready
              port: http
            initialDelaySeconds: *mrs
            periodSeconds: 5
          volumeMounts:
            - mountPath: /cached
              name: cached
          workingDir: /cached
      enableServiceLinks: false
      shareProcessNamespace: true
      tolerations:
        - operator: Exists
      volumes:
        - emptyDir:
            medium: Memory
            sizeLimit: 1Gi
          name: cached
